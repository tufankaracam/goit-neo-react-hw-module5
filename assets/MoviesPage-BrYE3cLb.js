import{j as t,u as v,r as a}from"./index-Dhy37DoS.js";import{M as f}from"./MovieList-C7Hotes8.js";import{s as _}from"./movie-DscL8J1O.js";const k="_input_4mxm6_1",C="_button_4mxm6_15",h={input:k,button:C},p="_pages_zu55n_1",S="_active_zu55n_35",x={pages:p,active:S};function g({page:e,totalPage:l,setPage:i}){const r=c=>{i(e-1)},u=c=>{i(e+1)},n=c=>{i(c.target.innerText)};return t.jsxs("ul",{className:x.pages,children:[t.jsx("li",{children:t.jsx("button",{onClick:r,disabled:e===1,children:"<"})}),e-3>=1&&t.jsx("li",{children:t.jsx("button",{onClick:n,children:1})}),e-2>=1&&t.jsx("li",{children:t.jsx("button",{onClick:n,children:e-2})}),e-1>=1&&t.jsx("li",{children:t.jsx("button",{onClick:n,children:e-1})}),t.jsx("li",{children:t.jsx("button",{onClick:n,className:x.active,children:e})}),e+1<=l&&t.jsx("li",{children:t.jsx("button",{onClick:n,children:e+1})}),e+2<=l&&t.jsx("li",{children:t.jsx("button",{onClick:n,children:e+2})}),e+3<=l&&t.jsx("li",{children:t.jsx("button",{onClick:n,children:l})}),t.jsx("li",{children:t.jsx("button",{onClick:u,disabled:e===l,children:">"})})]})}function R(){let[e,l]=v(),[i,r]=a.useState([]),[u,n]=a.useState(1),[c,d]=a.useState(null),[y,m]=a.useState(null);a.useEffect(()=>{(async()=>{try{if(e.get("query")){const s=await _(e.get("query"),e.get("page")||1);m(s.total_results),d(s.total_pages),n(s.page),r(s.results)}}catch(s){console.log(s)}})()},[e.toString()]);const j=o=>{o.preventDefault();const s=o.target;s.elements.text.value.length>0&&(l({query:s.elements.text.value,page:1}),s.reset())},b=o=>{const s=new URLSearchParams(e);s.set("page",o),l(s)};return t.jsxs("div",{children:[t.jsxs("form",{onSubmit:j,children:[t.jsx("input",{className:h.input,type:"text",name:"text",autoComplete:"off"}),t.jsx("input",{className:h.button,type:"submit",value:"Search"})]}),i.length>0&&t.jsx(f,{movies:i}),i.length>0&&t.jsx(g,{page:u,totalPage:c,setPage:b})]})}export{R as default};
