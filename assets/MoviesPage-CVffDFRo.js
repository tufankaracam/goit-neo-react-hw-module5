import{j as t,u as b,r as a}from"./index-CkdRSgI2.js";import{M as v}from"./MovieList-LRVwQ6gP.js";import{s as _}from"./movie-DscL8J1O.js";const k="_input_1x5fj_1",C="_button_1x5fj_15",h={input:k,button:C},p="_pages_19yl9_1",y="_active_19yl9_35",x={pages:p,active:y};function S({page:e,totalPage:l,setPage:i}){const r=c=>{i(e-1)},u=c=>{i(e+1)},n=c=>{i(c.target.innerText)};return t.jsxs("ul",{className:x.pages,children:[t.jsx("li",{children:t.jsx("button",{onClick:r,disabled:e===1,children:"<"})}),e-3>=1&&t.jsx("li",{children:t.jsx("button",{onClick:n,children:1})}),e-2>=1&&t.jsx("li",{children:t.jsx("button",{onClick:n,children:e-2})}),e-1>=1&&t.jsx("li",{children:t.jsx("button",{onClick:n,children:e-1})}),t.jsx("li",{children:t.jsx("button",{onClick:n,className:x.active,children:e})}),e+1<=l&&t.jsx("li",{children:t.jsx("button",{onClick:n,children:e+1})}),e+2<=l&&t.jsx("li",{children:t.jsx("button",{onClick:n,children:e+2})}),e+3<=l&&t.jsx("li",{children:t.jsx("button",{onClick:n,children:l})}),t.jsx("li",{children:t.jsx("button",{onClick:u,disabled:e===l,children:">"})})]})}function R(){let[e,l]=b(),[i,r]=a.useState([]),[u,n]=a.useState(1),[c,d]=a.useState(null),[g,j]=a.useState(null);a.useEffect(()=>{(async()=>{try{if(e.get("query")){const s=await _(e.get("query"),e.get("page")||1);j(s.total_results),d(s.total_pages),n(s.page),r(s.results)}}catch(s){console.log(s)}})()},[e.toString()]);const m=o=>{o.preventDefault();const s=o.target;s.elements.text.value.length>0&&(l({query:s.elements.text.value,page:1}),s.reset())},f=o=>{const s=new URLSearchParams(e);s.set("page",o),l(s)};return t.jsxs("div",{children:[t.jsxs("form",{onSubmit:m,children:[t.jsx("input",{className:h.input,type:"text",name:"text",autoComplete:"off"}),t.jsx("input",{className:h.button,type:"submit",value:"Search"})]}),i.length>0&&t.jsx(v,{movies:i}),i.length>0&&t.jsx(S,{page:u,totalPage:c,setPage:f})]})}export{R as default};
